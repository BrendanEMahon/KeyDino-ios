webpackJsonp([14],{U58d:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("loader",{attrs:{data:e.token,retry:e.refresh}},[n("checkpoint",{attrs:{name:"buy.libx.token"}}),n("portal",{attrs:{to:"mobile-title"}},[e._v(e._s(e.$t("exchange.libx.title.token")))]),e.token?n("div",{staticClass:"token"},[n("h1",[e._v(e._s(e.$t("exchange.libx.label.show-token",{token:e.token.token})))]),n("p",[e._v(e._s(e.$t("exchange.libx.label.token-expires",{time:new Date(e.token.expires).toLocaleString()})))]),e.expired?n("stateful-button",{attrs:{click:e.refresh}},[e._v(e._s(e.$t("general.button.refresh")))]):e._e(),n("div",[n("loader",{attrs:{data:e.status,retry:e.refresh}},[n("h2",[e._v(e._s(e.$t("exchange.libx.label.token-status")))]),n("p",[e._v(e._s(e.$t("exchange.libx.label.token-fees",{amount:e.status&&e.status.fees&&e.status.fees.formatted_currency||"none"})))]),n("p",[e._v(e._s(e.$t("exchange.libx.label.token-rate",{amount:e.status&&e.status.rate&&e.status.rate.formatted_currency||"none"})))]),n("p",[e._v(e._s(e.$t("exchange.libx.label.token-sent",{amount:e.status&&e.status.sent&&e.status.sent.formatted_currency||"none"})))])]),e.refreshing?n("div",[e._v(e._s(e.$t("exchange.libx.label.refreshing-token")))]):n("div",[e._v("Â ")])],1)],1):e._e()],1)},s=[],a={render:r,staticRenderFns:s};t.a=a},VA8p:function(e,t,n){var r=n("p46J");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("rjj0")("65f92e3f",r,!0)},"XR+8":function(e,t,n){"use strict";function r(e){n("VA8p")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("gsKk"),a=n("U58d"),i=n("VU/8"),o=r,c=i(s.a,a.a,o,"data-v-0bddba0c",null);t.default=c.exports},gsKk:function(e,t,n){"use strict";var r=n("Xxa5"),s=n.n(r),a=n("exGp"),i=n.n(a),o=(n("pxFO"),n("zSYu"));t.a={data:function(){return{token:null,status:null,error:null,notAuthenticated:!1,pin:"",done:!1,polling:!1,refreshing:!1}},mounted:function(){function e(){return t.apply(this,arguments)}var t=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.refresh();case 1:case"end":return e.stop()}},e,this)}));return e}(),beforeDestroy:function(){function e(){return t.apply(this,arguments)}var t=i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.polling=!1,this._destroyed=!0;case 2:case"end":return e.stop()}},e,this)}));return e}(),computed:{expired:function(){return new Date(this.token.expires)<new Date},service:Object(o.e)("service")},methods:{refresh:function(){function e(){return t.apply(this,arguments)}var t=i()(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/_wallet/info");case 2:return t=e.sent,n=t.receive_address,e.next=6,this.service.newToken({address:{value:n}});case 6:this.token=e.sent,this.token.error||this.poll(),"User is not authenticated against LibertyX"==this.token.error?this.notAuthenticated=!0:this.notAuthenticated=!1;case 9:case"end":return e.stop()}},e,this)}));return e}(),poll:function(){function e(){return t.apply(this,arguments)}var t=i()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.polling){e.next=2;break}return e.abrupt("return");case 2:console.log("Start polling"),this.polling=!0;case 4:if(!this.polling||this._destroyed){e.next=16;break}if(t=this.service.token,!this.token||!this.token.token){e.next=12;break}return this.refreshing=!0,e.next=10,this.$http.get("/_api/exchange/services/libertyx/token-status/"+this.token.token,{headers:{"X-Service-Token":t,"X-Should-Authenticate":"Yes","X-Should-Verify":"Yes"}});case 10:this.status=e.sent,this.refreshing=!1;case 12:return e.next=14,Object(o.g)(1e3);case 14:e.next=4;break;case 16:case"end":return e.stop()}},e,this)}));return e}()}}},p46J:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,".token[data-v-0bddba0c]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;min-height:330px;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.token h1[data-v-0bddba0c]{padding:22px}",""])}});
//# sourceMappingURL=token.c8eb4d2bf440bdad42aa.js.map